# Milestone v1.1: History & Trends

**Status:** SHIPPED 2026-02-10
**Phases:** 8-12
**Total Plans:** 13

## Overview

Analytics features for test history tracking, trend visualization, flakiness detection, performance regression alerts, and stability scoring.

## Phases

### Phase 8: History Infrastructure

**Goal**: Users can load and store historical test run data
**Depends on**: Phase 7 (v1.0 complete)
**Plans**: 3 plans

Plans:
- [x] 08-01: History schema with versioning and signature-based test identity
- [x] 08-02: HistoryStore with tiered loading and localStorage persistence
- [x] 08-03: FileLoader integration and history file upload UI

**Key Decisions:**
- SchemaVer format (MODEL-REVISION-ADDITION) for schema_version field
- Signature-based test identity (not UUID) for stable tracking across runs
- 100-run limit for memory management
- 2MB size warning threshold for localStorage

### Phase 9: Trend Visualization

**Goal**: Users can see pass rate and duration trends over time
**Depends on**: Phase 8
**Plans**: 3 plans

Plans:
- [x] 09-01: AnalyticsStore with computed trend data
- [x] 09-02: TrendsChart with pass rate and duration charts
- [x] 09-03: HistoryTimeline and Dashboard integration

**Key Decisions:**
- Recharts v2.15.4 for React 18 stability
- Single passRate line for clarity
- MUI Lab Timeline for HistoryTimeline component
- Color-coded status (green/red/yellow)

### Phase 10: Flakiness Detection

**Goal**: Users can identify flaky tests with multi-factor analysis
**Depends on**: Phase 9
**Plans**: 2 plans

Plans:
- [x] 10-01: Flakiness detection algorithm in AnalyticsStore
- [x] 10-02: StabilityBadge component and TestListItem integration

**Key Decisions:**
- 80% error consistency threshold
- 20% transition rate threshold for flaky classification
- 5-run minimum for flakiness detection
- Color-coded chips (warning/success/error)

### Phase 11: Regression Alerts

**Goal**: Users receive alerts for performance regressions and test failures
**Depends on**: Phase 10
**Plans**: 2 plans

Plans:
- [x] 11-01: Alert types and 2-sigma regression detection in AnalyticsStore
- [x] 11-02: AlertsPanel component and Dashboard integration

**Key Decisions:**
- 2-sigma threshold (mean + 2*stddev) for regression detection
- AlertItem unified interface for all alert types
- AlertsPanel navigation callback pattern
- 10-alert display limit

### Phase 12: Stability Scoring

**Goal**: Users can assess test health with A+ to F stability grades
**Depends on**: Phase 10
**Plans**: 3 plans

Plans:
- [x] 12-01: Stability types and getStabilityScore algorithm
- [x] 12-02: Grade filtering in TestList and grade badges
- [x] 12-03: TestHealthWidget dashboard component

**Key Decisions:**
- MIN_RUNS_STABILITY=10 for multi-factor statistical validity
- Weighted formula: passRate*0.5 + (100-flakiness)*0.3 + (100-CV)*0.2
- CV capped at 100%
- Grade thresholds: A+=95, A=90, B=80, C=70, D=60, F=<60

---

## Milestone Summary

**Key Decisions:**
- Signature-based test identity for stable history tracking
- Computed MobX properties for reactive trend data
- Recharts for visualization (avoiding D3 complexity)
- Multi-factor algorithms for flakiness and stability (not just status changes)
- 2-sigma outlier detection for regression alerts

**Issues Resolved:**
- History data persistence with localStorage (with size warnings)
- Flakiness detection without false positives (5-run minimum)
- Stability scoring with transparent formula (tooltip shows metrics)

**Issues Deferred:**
- Flakiness false positives tuning (needs real-world data)
- History retention limits configurability
- IndexedDB migration for large histories

**Technical Debt Incurred:**
- None significant

---

_For current project status, see .planning/ROADMAP.md_
