---
phase: 28-layout-simplification
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/App.tsx
  - src/store/index.tsx
autonomous: true

must_haves:
  truths:
    - "User no longer sees permanent sidebar component"
    - "User can filter tests by status and stability from test list view"
    - "User sees more horizontal space for test content"
    - "User filter selections persist when navigating between views"
  artifacts:
    - path: "src/App.tsx"
      provides: "App without NavigationDrawer import or usage"
      contains: "!NavigationDrawer"
    - path: "src/store/index.tsx"
      provides: "RootStore without navigation collapse state"
      contains: "!isNavigationCollapsed"
  key_links:
    - from: "src/components/TestList/TestListFilters.tsx"
      to: "src/store/TestResultsStore.ts"
      via: "useRootStore().testResultsStore"
      pattern: "testResultsStore.*statusFilters"
---

<objective>
Remove permanent sidebar (NavigationDrawer) and clean up orphaned store state.

Purpose: Simplify layout by removing duplicate navigation/filters. All functionality already exists elsewhere (hamburger menu for navigation, TestListFilters for filtering, StatusBarPill for stats).

Output: Cleaner App.tsx without sidebar, leaner RootStore without unused state, deleted sidebar component directories.
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/28-layout-simplification/28-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove NavigationDrawer from App and delete sidebar components</name>
  <files>
    src/App.tsx
    src/components/NavigationDrawer/
    src/components/SidebarFilters/
    src/components/SidebarStats/
    src/components/Sidebar/
  </files>
  <action>
    1. In src/App.tsx:
       - Remove import: `import { NavigationDrawer } from './components/NavigationDrawer'`
       - Remove usage: `<NavigationDrawer />` (line 171)
       - Keep everything else (hamburger menu, StatusBarPill, etc.)

    2. Delete entire directories:
       - `rm -rf src/components/NavigationDrawer/`
       - `rm -rf src/components/SidebarFilters/`
       - `rm -rf src/components/SidebarStats/`
       - `rm -rf src/components/Sidebar/`

    Note: Do NOT touch TestList components - TestListFilters stays as the sole filter location.
  </action>
  <verify>
    - `grep -r "NavigationDrawer" src/` returns no matches
    - `grep -r "SidebarFilters" src/` returns no matches
    - `grep -r "SidebarStats" src/` returns no matches
    - `ls src/components/NavigationDrawer 2>/dev/null || echo "deleted"` shows "deleted"
    - `npm run build` succeeds
  </verify>
  <done>
    - NavigationDrawer import and component removed from App.tsx
    - All four sidebar-related directories deleted
    - Build passes without errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Clean up orphaned RootStore state</name>
  <files>src/store/index.tsx</files>
  <action>
    1. Remove state properties:
       - `isDockOpen = false` (line 20)
       - `isNavigationCollapsed = false` (line 24)

    2. Remove methods:
       - `openDock = () => ...` (line 47)
       - `closeDock = () => ...` (lines 48-51)
       - `toggleNavigation = () => ...` (lines 57-63)

    3. Remove localStorage access in constructor (lines 36-44):
       ```typescript
       // REMOVE THIS BLOCK
       const stored = localStorage.getItem('navigationCollapsed')
       if (stored !== null) {
         try {
           this.isNavigationCollapsed = JSON.parse(stored)
         } catch (e) {
           console.warn('Failed to parse navigation state')
         }
       }
       ```

    4. Update selectTest method (line 76-79):
       - Remove `this.openDock()` call
       - Just set `this.selectedTestId = testId`

    5. Update clearSelection method (line 84-87):
       - Remove `this.closeDock()` call
       - Just set `this.selectedTestId = null`

    KEEP these (used by hamburger menu and modal):
    - `activeView` and `setActiveView`
    - `selectedTestId`, `selectedTest` (getter), `selectTest`, `clearSelection`
  </action>
  <verify>
    - `grep -r "isDockOpen" src/` returns no matches
    - `grep -r "isNavigationCollapsed" src/` returns no matches
    - `grep -r "toggleNavigation" src/` returns no matches
    - `grep -r "navigationCollapsed" src/` returns no matches (localStorage key)
    - `npm run build` succeeds
  </verify>
  <done>
    - isDockOpen, isNavigationCollapsed, openDock, closeDock, toggleNavigation removed
    - localStorage access for 'navigationCollapsed' removed
    - selectTest and clearSelection simplified (no dock calls)
    - activeView, setActiveView, selectedTestId, selectedTest preserved
  </done>
</task>

</tasks>

<verification>
Run verification commands:

```bash
# No orphan imports/references
grep -r "NavigationDrawer" src/
grep -r "SidebarFilters" src/
grep -r "SidebarStats" src/
grep -r "isDockOpen" src/
grep -r "isNavigationCollapsed" src/
grep -r "navigationCollapsed" src/

# Directories deleted
ls src/components/NavigationDrawer 2>&1
ls src/components/SidebarFilters 2>&1
ls src/components/SidebarStats 2>&1
ls src/components/Sidebar 2>&1

# Build succeeds
npm run build

# TestListFilters still exists (sole filter location)
ls src/components/TestList/TestListFilters.tsx
```

Visual verification (manual):
1. Run `npm run dev`
2. Confirm no sidebar visible on left
3. Navigate to Tests view via hamburger menu
4. Confirm status filter chips visible in test list
5. Confirm stability grade filter chips visible
6. Apply a filter, navigate away, navigate back - filter persists
</verification>

<success_criteria>
1. No permanent sidebar visible in UI
2. Full viewport width available for main content
3. Filters accessible and working in test list view
4. Filter state persists across view navigation
5. Build passes, no TypeScript errors
6. No orphan code (all grep checks pass)
</success_criteria>

<output>
After completion, create `.planning/phases/28-layout-simplification/28-01-SUMMARY.md`
</output>
