---
phase: 02-dashboard-overview
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/store/ReportStore.ts
  - src/components/Dashboard/index.tsx
  - src/components/Dashboard/StatsCard.tsx
  - src/components/Dashboard/RunInfoCard.tsx
  - src/components/Dashboard/HostInfoCard.tsx
  - src/layout/MainLayout/index.tsx
autonomous: false

must_haves:
  truths:
    - "Dashboard displays passed/failed/skipped/broken counts with percentages"
    - "Dashboard shows run title and environment"
    - "Dashboard shows formatted duration"
    - "Dashboard displays host system, machine, and python version"
    - "Statistics accurately reflect loaded data"
  artifacts:
    - path: "src/store/ReportStore.ts"
      provides: "Computed getters for failedRate, skippedRate, brokenRate, formattedDuration"
      contains: "get failedRate"
    - path: "src/components/Dashboard/index.tsx"
      provides: "Dashboard container with Grid layout"
      contains: "observer"
    - path: "src/components/Dashboard/StatsCard.tsx"
      provides: "Reusable statistics card component"
      contains: "CardContent"
    - path: "src/components/Dashboard/RunInfoCard.tsx"
      provides: "Run metadata display (title, environment, duration)"
      contains: "CardContent"
    - path: "src/components/Dashboard/HostInfoCard.tsx"
      provides: "Host data display (system, machine, python)"
      contains: "CardContent"
  key_links:
    - from: "src/components/Dashboard/index.tsx"
      to: "src/store/ReportStore.ts"
      via: "useRootStore hook"
      pattern: "useRootStore"
    - from: "src/components/Dashboard/StatsCard.tsx"
      to: "src/store/ReportStore.ts"
      via: "computed getters"
      pattern: "passRate|failedRate|skippedRate|brokenRate"
    - from: "src/layout/MainLayout/index.tsx"
      to: "src/components/Dashboard/index.tsx"
      via: "import and render"
      pattern: "Dashboard"
---

<objective>
Build the dashboard overview displaying test run statistics, run metadata, and host information in a responsive card layout.

Purpose: User needs to see at-a-glance summary of test results after loading a report - passed/failed/skipped/broken counts with percentages, run title/environment/duration, and host system details.

Output: Dashboard components integrated into MainLayout, displaying data from ReportStore
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-dashboard-overview/02-RESEARCH.md
@src/store/ReportStore.ts
@src/schemas/QaseRun.schema.ts
@src/layout/MainLayout/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add computed getters to ReportStore</name>
  <files>src/store/ReportStore.ts</files>
  <action>
Add computed getters to ReportStore following the existing passRate pattern:

1. `get failedRate(): number` - (stats.failed / stats.total) * 100, return 0 if total is 0 or runData is null
2. `get skippedRate(): number` - (stats.skipped / stats.total) * 100, same null/zero handling
3. `get brokenRate(): number` - (stats.broken / stats.total) * 100, same null/zero handling
4. `get formattedDuration(): string` - Convert execution.duration (milliseconds) to human-readable format:
   - 0s if no runData
   - Xh Ym Zs for hours
   - Xm Zs for minutes
   - Xs for seconds only

Follow the exact pattern from existing passRate getter for null/zero checks. No additional imports needed - makeAutoObservable handles computed getters automatically.
  </action>
  <verify>TypeScript compiles without errors: `npm run build` succeeds</verify>
  <done>ReportStore has failedRate, skippedRate, brokenRate, formattedDuration getters returning correct values</done>
</task>

<task type="auto">
  <name>Task 2: Create Dashboard components</name>
  <files>
src/components/Dashboard/index.tsx
src/components/Dashboard/StatsCard.tsx
src/components/Dashboard/RunInfoCard.tsx
src/components/Dashboard/HostInfoCard.tsx
  </files>
  <action>
Create Dashboard component directory and files:

**StatsCard.tsx** - Reusable card for displaying a single statistic:
- Props: `status: 'passed' | 'failed' | 'skipped' | 'broken'`, `count: number`, `percentage: number`
- Use MUI Card with CardContent
- Typography variant="overline" for label (status name capitalized)
- Typography variant="h3" for count
- Typography variant="body2" for percentage with 1 decimal (e.g., "75.0%")
- Color based on status: success.main for passed, error.main for failed, warning.main for broken, text.secondary for skipped
- No observer needed - receives data via props

**RunInfoCard.tsx** - Run metadata display:
- Wrap with observer()
- Access reportStore.runData via useRootStore()
- Display: title, environment (show "Not specified" if null/undefined), formattedDuration
- Use MUI Card with CardContent
- Typography for each field with appropriate variants

**HostInfoCard.tsx** - Host system information:
- Wrap with observer()
- Access reportStore.runData.host_data via useRootStore()
- Display: system, machine, python (only show python line if present)
- Use MUI Card with CardContent
- Handle null runData gracefully

**Dashboard/index.tsx** - Container with responsive Grid:
- Wrap with observer()
- Access reportStore via useRootStore()
- If no runData, show Typography "Load a report to view dashboard"
- MUI Grid container with spacing={3}
- Stats cards row: 4 StatsCard components (xs=12 sm=6 md=3 for responsive 4-column layout)
- Info cards row: RunInfoCard and HostInfoCard (xs=12 md=6 for 2-column layout)
- Pass data to StatsCard via props from reportStore (stats.passed, passRate, etc.)
- Export Dashboard as named export

Follow existing component patterns from LoadReportButton and MainLayout.
  </action>
  <verify>TypeScript compiles without errors: `npm run build` succeeds</verify>
  <done>Dashboard directory exists with 4 component files, all using observer pattern where needed</done>
</task>

<task type="auto">
  <name>Task 3: Integrate Dashboard into MainLayout</name>
  <files>src/layout/MainLayout/index.tsx</files>
  <action>
Update MainLayout to display Dashboard:

1. Import Dashboard from '../../components/Dashboard'
2. Replace the placeholder content in the main Grid item (xs=10) with Dashboard component
3. Keep LoadReportButton above the Dashboard
4. Remove the "Hello from smaller container" placeholder text
5. Keep the Sidebar component and its controls intact

The layout should be:
- LoadReportButton at top for loading reports
- Dashboard below showing statistics (or "Load a report" message if no data)
- Sidebar button and component remain functional

Do NOT remove the existing Button for opening sidebar - it's needed for the Sidebar functionality.
  </action>
  <verify>Run `npm run dev`, load a report JSON, verify dashboard displays statistics</verify>
  <done>MainLayout renders Dashboard component, statistics visible after loading a report</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 4: Visual verification of Dashboard</name>
  <what-built>Dashboard overview with statistics cards, run info, and host data</what-built>
  <how-to-verify>
1. Run `npm run dev` to start the development server
2. Open http://localhost:5173 in browser
3. Verify "Load a report to view dashboard" message appears initially
4. Click "Load Report" and select a valid Qase report folder (with run.json)
5. Verify dashboard displays:
   - 4 statistics cards (Passed, Failed, Skipped, Broken) with counts and percentages
   - Run Info card showing title, environment, and duration
   - Host Info card showing system, machine, and python version (if present)
6. Verify cards are responsive (resize browser window)
7. Verify colors match status (green for passed, red for failed, yellow for broken, gray for skipped)
  </how-to-verify>
  <resume-signal>Type "approved" if dashboard displays correctly, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run build` succeeds without TypeScript errors
2. Dashboard loads and displays statistics from actual report data
3. Percentages calculate correctly (passed + failed + skipped + broken rates should sum close to 100%)
4. Duration formats correctly (shows Xh Ym Zs format)
5. Null/empty states handled gracefully
</verification>

<success_criteria>
- Dashboard displays passed/failed/skipped/broken counts with percentages
- Dashboard shows run information (title, environment, duration)
- Dashboard displays host data (system, machine, python version)
- All statistics accurately reflect loaded data
- Responsive layout works across screen sizes
</success_criteria>

<output>
After completion, create `.planning/phases/02-dashboard-overview/02-01-SUMMARY.md`
</output>
