---
phase: 32-layout-restructure
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/RunInfoSidebar/index.tsx
autonomous: true

must_haves:
  truths:
    - "User sees completion rate ring with correct pass rate percentage"
    - "User sees run metadata (date, duration, environment)"
    - "User sees quick stats (passed/failed/skipped/flaky counts)"
  artifacts:
    - path: "src/components/RunInfoSidebar/index.tsx"
      provides: "Right sidebar with pass rate ring and metadata"
      exports: ["RunInfoSidebar"]
  key_links:
    - from: "src/components/RunInfoSidebar/index.tsx"
      to: "reportStore.runData"
      via: "useRootStore hook"
      pattern: "reportStore\\.runData"
    - from: "src/components/RunInfoSidebar/index.tsx"
      to: "reportStore.passRate"
      via: "computed property"
      pattern: "reportStore\\.passRate"
---

<objective>
Create RunInfoSidebar component with completion rate ring and run metadata.

Purpose: Move StatusBarPill logic to vertical sidebar layout for permanent visibility.
Output: RunInfoSidebar component ready for layout integration.
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/32-layout-restructure/32-RESEARCH.md

@src/components/StatusBarPill/index.tsx
@src/store/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create RunInfoSidebar component</name>
  <files>src/components/RunInfoSidebar/index.tsx</files>
  <action>
Create RunInfoSidebar component that:

1. Uses observer() from mobx-react-lite for reactivity
2. Uses useRootStore() to access reportStore and analyticsStore
3. Returns early with "No report loaded" message if !reportStore.runData

4. Renders larger completion rate ring (96px vs 40px in StatusBarPill):
   - SVG with cx="48" cy="48" r="40" strokeWidth="8"
   - Circumference = 2 * PI * 40 = 251.2
   - strokeDasharray={`${(passRate / 100) * 251.2} 251.2`}
   - Background circle: text-muted opacity-30
   - Foreground circle: color based on rate (>=80 green, >=50 yellow, <50 red)
   - Centered percentage label (text-2xl font-bold)
   - "Pass Rate" label below ring

5. Renders statistics section with vertical layout:
   - Passed count (text-green-500)
   - Failed count (text-red-500)
   - Skipped count (conditional, only if > 0)
   - Flaky count (conditional, from analyticsStore.flakyTestCount)
   - Use flex justify-between for label/value pairs

6. Renders metadata section with border-t separator:
   - Date (formatted with Intl.DateTimeFormat)
   - Duration (from reportStore.formattedDuration)
   - Environment (conditional, only if present in runData)
   - Each item: label (text-xs text-muted-foreground) + value (text-sm)

Reference StatusBarPill for exact color logic and data access patterns.
Reference research pattern from 32-RESEARCH.md "Pattern 3: Sidebar with Completion Ring and Metadata".
  </action>
  <verify>
```bash
cat src/components/RunInfoSidebar/index.tsx | head -80
```
Should show observer() wrapper, reportStore/analyticsStore access, SVG ring with 96px dimensions.
  </verify>
  <done>RunInfoSidebar renders pass rate ring, statistics, and metadata in vertical layout</done>
</task>

</tasks>

<verification>
1. `npm run build` - TypeScript compilation passes
2. `npm run dev` - App loads without errors
3. Component can be imported: `import { RunInfoSidebar } from './components/RunInfoSidebar'`
</verification>

<success_criteria>
- RunInfoSidebar component created at src/components/RunInfoSidebar/index.tsx
- Pass rate ring displays with correct color based on percentage
- Statistics show passed/failed/skipped/flaky counts
- Metadata shows date/duration/environment
- MobX observer reactivity works
</success_criteria>

<output>
After completion, create `.planning/phases/32-layout-restructure/32-02-SUMMARY.md`
</output>
