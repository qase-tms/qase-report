---
phase: 15-bento-grid-dashboard
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Dashboard/BentoGrid.tsx
  - src/components/Dashboard/DashboardCard.tsx
  - src/components/Dashboard/index.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard displays widgets in CSS Grid layout (not Flexbox)"
    - "Cards have varied sizes (1x1, 2x1, 2x2 spans visible)"
    - "Layout collapses to single column on mobile (<900px)"
    - "Layout uses 4-column grid on tablet (900-1279px)"
    - "Layout uses 6-column grid on desktop (1280px+)"
  artifacts:
    - path: "src/components/Dashboard/BentoGrid.tsx"
      provides: "CSS Grid container with responsive breakpoints"
      exports: ["BentoGrid"]
    - path: "src/components/Dashboard/DashboardCard.tsx"
      provides: "Card wrapper with colSpan/rowSpan props"
      exports: ["DashboardCard"]
    - path: "src/components/Dashboard/index.tsx"
      provides: "Refactored dashboard using Bento layout"
      contains: "BentoGrid"
  key_links:
    - from: "src/components/Dashboard/index.tsx"
      to: "src/components/Dashboard/BentoGrid.tsx"
      via: "import and render"
      pattern: "import.*BentoGrid"
    - from: "src/components/Dashboard/index.tsx"
      to: "src/components/Dashboard/DashboardCard.tsx"
      via: "wrap existing widgets"
      pattern: "DashboardCard.*colSpan"
---

<objective>
Create CSS Grid-based Bento layout system for the dashboard with responsive breakpoints and variable card sizes.

Purpose: Replace MUI Grid (Flexbox-based) with CSS Grid to enable row spanning for visual hierarchy - a core Bento Grid pattern that MUI Grid cannot support.

Output: BentoGrid container, DashboardCard wrapper, refactored Dashboard using new layout system.
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/15-bento-grid-dashboard/15-RESEARCH.md

# Existing Dashboard structure
@src/components/Dashboard/index.tsx
@src/components/Dashboard/StatsCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BentoGrid container component</name>
  <files>src/components/Dashboard/BentoGrid.tsx</files>
  <action>
Create BentoGrid.tsx - CSS Grid container with responsive breakpoints.

Implementation:
1. Use MUI Box with `display: 'grid'` (NOT MUI Grid component)
2. Set `gap: 2` (16px MUI spacing) consistently across all breakpoints
3. Mobile (default): `gridTemplateColumns: '1fr'` - single column stack
4. Tablet (900px+): `gridTemplateColumns: 'repeat(4, 1fr)'`, `gridAutoRows: 'minmax(120px, auto)'`
5. Desktop (1280px+): `gridTemplateColumns: 'repeat(6, 1fr)'`, `gridAutoRows: 'minmax(140px, auto)'`

Use MUI sx prop with media queries:
```typescript
'@media (min-width: 900px)': { ... }
'@media (min-width: 1280px)': { ... }
```

Props: `{ children: React.ReactNode }`
Export: Named export `BentoGrid`
  </action>
  <verify>
File exists at src/components/Dashboard/BentoGrid.tsx with CSS Grid styles and responsive breakpoints.
`grep -n "display: 'grid'" src/components/Dashboard/BentoGrid.tsx` returns match.
  </verify>
  <done>BentoGrid component exported with CSS Grid layout and 3 responsive breakpoints (mobile/tablet/desktop).</done>
</task>

<task type="auto">
  <name>Task 2: Create DashboardCard wrapper component</name>
  <files>src/components/Dashboard/DashboardCard.tsx</files>
  <action>
Create DashboardCard.tsx - Card wrapper with grid span props.

Implementation:
1. Interface: `{ colSpan?: number, rowSpan?: number, children: React.ReactNode }`
2. Defaults: `colSpan = 1`, `rowSpan = 1`
3. Use MUI Card with elevation={2}
4. Mobile: Always `gridColumn: 'span 1'`, `gridRow: 'span 1'` (ignore spans)
5. Tablet (900px+): `gridColumn: span ${Math.min(colSpan, 4)}` (cap at 4 columns)
6. Desktop (1280px+): `gridColumn: span ${colSpan}` (full span)
7. Row span: `gridRow: span ${rowSpan}` for tablet and desktop
8. CardContent wrapper for children with proper padding

Important: Do NOT use MUI Grid inside - this is for CSS Grid placement.
  </action>
  <verify>
File exists at src/components/Dashboard/DashboardCard.tsx.
`grep -n "gridColumn" src/components/Dashboard/DashboardCard.tsx` shows span logic.
`grep -n "colSpan" src/components/Dashboard/DashboardCard.tsx` shows prop definition.
  </verify>
  <done>DashboardCard component exported with colSpan/rowSpan props and responsive span capping.</done>
</task>

<task type="auto">
  <name>Task 3: Refactor Dashboard to use Bento layout</name>
  <files>src/components/Dashboard/index.tsx</files>
  <action>
Refactor Dashboard/index.tsx to use BentoGrid and DashboardCard.

Changes:
1. Import BentoGrid and DashboardCard
2. Replace outer `<Grid container>` with `<BentoGrid>`
3. Replace `<Grid item>` wrappers with `<DashboardCard>`
4. Remove MUI Grid imports (Grid from @mui/material)

Card sizing strategy (visual hierarchy):
- StatsCards (passed/failed/skipped/broken): 1x1 each - compact counters
- RunInfoCard: 2x1 (colSpan={2}) - horizontal metadata
- HostInfoCard: 2x1 (colSpan={2}) - horizontal metadata
- AlertsPanel: 3x1 (colSpan={3}) - wide alert list
- TrendsChart: 4x2 (colSpan={4}, rowSpan={2}) - large chart prominence
- TestHealthWidget: 2x2 (colSpan={2}, rowSpan={2}) - visual importance
- HistoryTimeline: 2x2 (colSpan={2}, rowSpan={2}) - vertical timeline

Keep all existing conditional rendering logic (alerts if hasAlerts, trends if hasTrendData, etc).
Keep handleAlertClick callback unchanged.

Remove Box wrappers with `sx={{ mt: 3 }}` - Bento grid handles spacing via gap.
  </action>
  <verify>
`npm run build` succeeds without errors.
`grep -n "BentoGrid" src/components/Dashboard/index.tsx` shows import and usage.
`grep -n "Grid container" src/components/Dashboard/index.tsx` returns no matches (MUI Grid removed).
  </verify>
  <done>Dashboard renders all widgets in CSS Grid Bento layout with varied card sizes based on content importance.</done>
</task>

</tasks>

<verification>
1. Run `npm run build` - should complete without errors
2. Run `npm run dev` and open browser
3. Verify dashboard shows cards in grid layout (not stacked vertically like before)
4. Resize browser to test responsive breakpoints:
   - <900px: Single column (mobile)
   - 900-1279px: 4 columns (tablet)
   - 1280px+: 6 columns (desktop)
5. Verify TrendsChart/TestHealthWidget have larger visual prominence than StatsCards
</verification>

<success_criteria>
- BentoGrid.tsx exists with CSS Grid (display: grid) and responsive media queries
- DashboardCard.tsx exists with colSpan/rowSpan props
- Dashboard/index.tsx uses BentoGrid (no MUI Grid container)
- Dashboard cards have varied sizes (visual hierarchy)
- Layout responsive at 900px and 1280px breakpoints
- Build passes, no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/15-bento-grid-dashboard/15-01-SUMMARY.md`
</output>
