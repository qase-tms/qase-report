---
phase: 34-tanstack-table-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/components/ui/table.tsx
  - src/components/ui/dropdown-menu.tsx
autonomous: true

must_haves:
  truths:
    - TanStack Table packages installed and available for import
    - shadcn/ui Table component renders without TypeScript errors
    - shadcn/ui DropdownMenu component renders without TypeScript errors
  artifacts:
    - path: package.json
      provides: TanStack dependencies
      contains: "@tanstack/react-table"
    - path: src/components/ui/table.tsx
      provides: shadcn Table UI components
      exports: ["Table", "TableHeader", "TableBody", "TableRow", "TableHead", "TableCell"]
    - path: src/components/ui/dropdown-menu.tsx
      provides: Row actions dropdown
      exports: ["DropdownMenu", "DropdownMenuTrigger", "DropdownMenuContent", "DropdownMenuItem"]
  key_links:
    - from: package.json
      to: node_modules
      via: npm install
      pattern: "@tanstack/react-table.*@tanstack/react-virtual.*@tanstack/match-sorter-utils"
    - from: shadcn CLI
      to: src/components/ui/
      via: component installation
      pattern: "npx shadcn@latest add"
---

<objective>
Install TanStack Table ecosystem and shadcn/ui components required for data table implementation.

Purpose: Establish foundation for table-based test list with virtualization and fuzzy search.
Output: Dependencies installed, UI components ready for integration.
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34-tanstack-table-migration/34-RESEARCH.md
@src/components/ui/button.tsx
@src/components/ui/badge.tsx
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install TanStack Table packages</name>
  <files>package.json</files>
  <action>
Install three TanStack packages for table implementation:

```bash
npm install @tanstack/react-table @tanstack/react-virtual @tanstack/match-sorter-utils
```

Packages:
- @tanstack/react-table: Headless table logic with sorting, filtering, column definitions
- @tanstack/react-virtual: Virtual scrolling optimized for TanStack Table (replaces react-window)
- @tanstack/match-sorter-utils: Fuzzy filtering for command palette search

Per research: TanStack Virtual is more responsive than react-window (which is unmaintained since 2022) and designed to integrate with TanStack Table. match-sorter-utils is forked specifically for TanStack Table row-by-row filtering.

Do NOT uninstall react-window yet - current VirtualizedTestList.tsx still depends on it. Removal will happen in later plan after migration complete.
  </action>
  <verify>
```bash
cat package.json | grep -E "@tanstack/(react-table|react-virtual|match-sorter-utils)"
```
All three packages appear in dependencies with latest versions.
  </verify>
  <done>package.json contains @tanstack/react-table, @tanstack/react-virtual, and @tanstack/match-sorter-utils in dependencies section</done>
</task>

<task type="auto">
  <name>Task 2: Install shadcn Table and DropdownMenu components</name>
  <files>
src/components/ui/table.tsx
src/components/ui/dropdown-menu.tsx
  </files>
  <action>
Install two shadcn/ui components via CLI:

```bash
npx shadcn@latest add table dropdown-menu -y
```

Components:
- table: Provides Table, TableHeader, TableBody, TableRow, TableHead, TableCell primitives
- dropdown-menu: For row actions (view details, view history)

Per research: shadcn/ui data table pattern is official integration approach with TanStack Table. CLI adds components to src/components/ui/ with correct styling for dark theme (already configured in Phase 30).

The -y flag bypasses interactive prompts (non-interactive setup like Phase 31-01).
  </action>
  <verify>
```bash
test -f src/components/ui/table.tsx && test -f src/components/ui/dropdown-menu.tsx && echo "Both components installed"
```
Both files exist in src/components/ui/.
  </verify>
  <done>src/components/ui/table.tsx and src/components/ui/dropdown-menu.tsx exist and export required components</done>
</task>

</tasks>

<verification>
1. Run `npm list @tanstack/react-table @tanstack/react-virtual @tanstack/match-sorter-utils` to confirm package installation
2. Verify TypeScript can import Table components: `import { Table } from '@/components/ui/table'` compiles without errors
3. Verify TypeScript can import DropdownMenu: `import { DropdownMenu } from '@/components/ui/dropdown-menu'` compiles without errors
4. Run `npm run build` to ensure no new TypeScript errors introduced
</verification>

<success_criteria>
- [ ] @tanstack/react-table, @tanstack/react-virtual, @tanstack/match-sorter-utils installed in package.json
- [ ] shadcn/ui table component exists at src/components/ui/table.tsx
- [ ] shadcn/ui dropdown-menu component exists at src/components/ui/dropdown-menu.tsx
- [ ] npm run build completes successfully
- [ ] No TypeScript import errors for new packages
</success_criteria>

<output>
After completion, create `.planning/phases/34-tanstack-table-migration/34-01-SUMMARY.md`
</output>
