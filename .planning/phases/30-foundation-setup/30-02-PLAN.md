---
phase: 30-foundation-setup
plan: 02
type: execute
wave: 2
depends_on: ["30-01"]
files_modified:
  - tsconfig.json
  - components.json
  - src/components/ui/button.tsx
autonomous: true

must_haves:
  truths:
    - "shadcn/ui CLI can add components to src/components/ui/"
    - "Path alias @/* resolves correctly in imports"
    - "Added shadcn component renders without errors"
  artifacts:
    - path: "tsconfig.json"
      provides: "Path aliases for @/* imports"
      contains: "paths"
    - path: "components.json"
      provides: "shadcn/ui CLI configuration"
      contains: "aliases"
    - path: "src/components/ui/button.tsx"
      provides: "First shadcn component"
      contains: "buttonVariants"
  key_links:
    - from: "tsconfig.json"
      to: "vite.config.ts"
      via: "matching path alias configuration"
      pattern: "@/\\*.*src/\\*"
    - from: "components.json"
      to: "src/components/ui"
      via: "ui alias pointing to component directory"
      pattern: "ui.*@/components/ui"
---

<objective>
Initialize shadcn/ui CLI and configure TypeScript path aliases for component imports.

Purpose: Enable shadcn/ui component installation via CLI with proper @/* import paths.
Output: Working shadcn/ui configuration with first test component (Button).
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/STACK-SHADCN-MIGRATION.md
@.planning/research/ARCHITECTURE-SHADCN-MIGRATION.md
@.planning/phases/30-foundation-setup/30-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure TypeScript path aliases</name>
  <files>tsconfig.json</files>
  <action>
Update tsconfig.json to add baseUrl and paths for @/* imports:

```json
{
  "compilerOptions": {
    "target": "ESNext",
    "useDefineForClassFields": true,
    "lib": ["DOM", "DOM.Iterable", "ESNext"],
    "allowJs": false,
    "skipLibCheck": true,
    "esModuleInterop": false,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "module": "ESNext",
    "moduleResolution": "Node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

Key additions:
- "baseUrl": "." - Required for paths to work
- "paths": { "@/*": ["./src/*"] } - Maps @/components/ui to ./src/components/ui

This matches the alias already configured in vite.config.ts (from 30-01).
  </action>
  <verify>
1. TypeScript recognizes path: Create test import `import { cn } from "@/lib/utils"` in any file
2. Run `npx tsc --noEmit` - should compile without "Cannot find module" errors
  </verify>
  <done>
TypeScript configured with @/* path aliases matching Vite configuration.
  </done>
</task>

<task type="auto">
  <name>Task 2: Initialize shadcn/ui CLI</name>
  <files>components.json, src/index.css</files>
  <action>
Run shadcn/ui initialization with specific options to avoid interactive prompts:

```bash
npx shadcn@latest init --defaults --base-color neutral --css-variables
```

If that doesn't work with all flags, run interactively and select:
- Style: new-york (cleaner, more modern)
- Base color: Neutral (matches current dark theme)
- CSS variables: Yes

The CLI will:
1. Create components.json with configuration
2. Update src/index.css with CSS variables for theming

After init, verify components.json contains:
```json
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "src/index.css",
    "baseColor": "neutral",
    "cssVariables": true
  },
  "aliases": {
    "utils": "@/lib/utils",
    "components": "@/components",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  }
}
```

IMPORTANT: If CLI overwrites index.css, restore the MUI compatibility styles:
```css
@import "tailwindcss";

/* shadcn/ui CSS variables will be here */

/* MUI coexistence - preserve until Phase 30-04 */
html,
body,
#root {
  margin: 0;
  padding: 0;
  min-height: 100vh;
}

html {
  background-color: var(--mui-palette-background-default, hsl(var(--background)));
  overflow-y: auto;
  scrollbar-gutter: stable;
}
```
  </action>
  <verify>
1. components.json exists in project root
2. src/index.css contains CSS variables (--background, --foreground, etc.)
3. `npm run dev` still works
  </verify>
  <done>
shadcn/ui CLI initialized with new-york style and neutral base color.
  </done>
</task>

<task type="auto">
  <name>Task 3: Add first shadcn component (Button) and verify</name>
  <files>src/components/ui/button.tsx</files>
  <action>
Add the Button component to verify shadcn/ui is working:

```bash
npx shadcn@latest add button
```

This creates src/components/ui/button.tsx with:
- CVA (class-variance-authority) variants
- Proper TypeScript types
- cn() utility usage
- forwardRef for ref forwarding

After adding, verify the file exists and contains buttonVariants.

Create a simple test to verify it works - temporarily add to any component:
```typescript
import { Button } from "@/components/ui/button"
// <Button variant="outline">Test</Button>
```

Do NOT commit the test import - just verify it compiles and renders.
  </action>
  <verify>
1. src/components/ui/button.tsx exists
2. File contains `buttonVariants` and exports `Button`
3. TypeScript: `npx tsc --noEmit` passes
4. Can import: `import { Button } from "@/components/ui/button"` resolves
  </verify>
  <done>
shadcn/ui Button component added, verifying CLI and path alias work correctly.
  </done>
</task>

</tasks>

<verification>
1. tsconfig.json has baseUrl and paths configured
2. components.json exists with proper aliases
3. src/components/ui/button.tsx exists and exports Button
4. `npx tsc --noEmit` passes
5. `npm run dev` and `npm run build` succeed
</verification>

<success_criteria>
- Path alias @/* works in TypeScript and Vite
- shadcn/ui CLI can add components to src/components/ui/
- CSS variables for theming are in index.css
- Button component added as proof of working setup
- MUI still functional (coexistence maintained)
</success_criteria>

<output>
After completion, create `.planning/phases/30-foundation-setup/30-02-SUMMARY.md`
</output>
