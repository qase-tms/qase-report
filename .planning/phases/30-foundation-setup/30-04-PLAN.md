---
phase: 30-foundation-setup
plan: 04
type: execute
wave: 3
depends_on: ["30-02", "30-03"]
files_modified:
  - package.json
  - src/theme/ThemeRegistry.tsx
  - src/App.tsx
  - src/index.css
  - src/layout/MainLayout/index.tsx
  - src/components/Dashboard/index.tsx
  - src/components/TestList/index.tsx
  - src/components/TestList/TestListItem.tsx
  - src/components/TestList/SuiteGroup.tsx
  - src/components/TestList/VirtualizedTestList.tsx
  - src/components/TestList/TestListFilters.tsx
  - src/components/TestList/StabilityGradeFilter.tsx
  - src/components/TestList/TestListSearch.tsx
  - src/components/TestList/StabilityBadge.tsx
  - src/components/TestList/statusIcon.tsx
  - src/components/TestDetails/index.tsx
  - src/components/TestDetails/TestHeader.tsx
  - src/components/TestDetails/TestStep.tsx
  - src/components/TestDetails/TestSteps.tsx
  - src/components/TestDetails/TestError.tsx
  - src/components/TestDetails/TestFields.tsx
  - src/components/TestDetails/TestParams.tsx
  - src/components/TestDetails/TestAttachments.tsx
  - src/components/TestDetails/TestStepAttachment.tsx
  - src/components/TestDetailsModal/index.tsx
  - src/components/Dashboard/BentoGrid.tsx
  - src/components/Dashboard/DashboardCard.tsx
  - src/components/Dashboard/SparklineCard.tsx
  - src/components/Dashboard/HostInfoCard.tsx
  - src/components/Dashboard/RunInfoCard.tsx
  - src/components/Dashboard/TrendsChart.tsx
  - src/components/Dashboard/HistoryTimeline.tsx
  - src/components/Dashboard/AlertsPanel.tsx
  - src/components/Dashboard/TestHealthWidget.tsx
  - src/components/Dashboard/SuiteHealthCard.tsx
  - src/components/Dashboard/AttentionRequiredCard.tsx
  - src/components/Dashboard/QuickInsightsCard.tsx
  - src/components/FailureClusters/index.tsx
  - src/components/FailureClusters/ClusterGroup.tsx
  - src/components/Gallery/index.tsx
  - src/components/Gallery/GalleryGrid.tsx
  - src/components/Gallery/GalleryItem.tsx
  - src/components/Gallery/GalleryFilters.tsx
  - src/components/Comparison/index.tsx
  - src/components/Comparison/RunSelector.tsx
  - src/components/Comparison/ComparisonSummary.tsx
  - src/components/Comparison/DiffList.tsx
  - src/components/AttachmentViewer/index.tsx
  - src/components/AttachmentViewer/ImageViewer.tsx
  - src/components/AttachmentViewer/TextViewer.tsx
  - src/components/AttachmentViewer/DownloadButton.tsx
  - src/components/SearchModal/index.tsx
  - src/components/ExportButton/index.tsx
  - src/components/RunDateDisplay/index.tsx
  - src/components/StatusBarPill/index.tsx
  - src/components/ThemeToggle/index.tsx
  - src/components/FileUploader.tsx
  - src/components/LoadReportButton/index.tsx
autonomous: false

must_haves:
  truths:
    - "No MUI or Emotion imports exist in any source file"
    - "package.json has no @mui/* or @emotion/* dependencies"
    - "npm run build succeeds without MUI"
    - "Application renders with Tailwind-only styling"
  artifacts:
    - path: "package.json"
      provides: "Clean dependencies without MUI/Emotion"
      contains: "tailwindcss"
    - path: "src/App.tsx"
      provides: "App without MUI providers"
      contains: "ThemeProvider"
  key_links:
    - from: "src/App.tsx"
      to: "src/components/ThemeProvider.tsx"
      via: "ThemeProvider import"
      pattern: "import.*ThemeProvider.*from"
---

<objective>
Remove MUI and Emotion dependencies completely, replacing with Tailwind CSS styling.

Purpose: Eliminate CSS conflicts and reduce bundle size by ~215-230KB.
Output: Application running purely on Tailwind CSS with no MUI remnants.
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/STACK-SHADCN-MIGRATION.md
@.planning/research/ARCHITECTURE-SHADCN-MIGRATION.md
@.planning/phases/30-foundation-setup/30-01-SUMMARY.md
@.planning/phases/30-foundation-setup/30-02-SUMMARY.md
@.planning/phases/30-foundation-setup/30-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace MUI components with Tailwind equivalents in all files</name>
  <files>All 50+ component files listed in files_modified</files>
  <action>
Systematically replace MUI components with Tailwind CSS equivalents in ALL source files.

**Conversion patterns:**

1. **Box** -> div with Tailwind classes
   - `<Box sx={{ display: 'flex', p: 2 }}>` -> `<div className="flex p-4">`
   - MUI spacing: 1 = 8px, Tailwind: 1 = 4px. So MUI p: 2 (16px) = Tailwind p-4 (16px)

2. **Paper** -> div with card-like styling
   - `<Paper elevation={1}>` -> `<div className="bg-card rounded-lg border shadow-sm">`

3. **Typography** -> native elements with Tailwind
   - `<Typography variant="h6">` -> `<h6 className="text-lg font-semibold">`
   - `<Typography variant="body1">` -> `<p className="text-base">`
   - `<Typography variant="body2">` -> `<p className="text-sm text-muted-foreground">`

4. **Grid** -> CSS Grid or Flexbox
   - `<Grid container spacing={2}>` -> `<div className="grid gap-4">`
   - `<Grid item xs={12} md={6}>` -> `<div className="col-span-12 md:col-span-6">`

5. **IconButton** -> button with icon styling
   - `<IconButton color="inherit">` -> `<button className="p-2 rounded-md hover:bg-accent">`

6. **Button** -> Tailwind button (temporary until shadcn Button integrated)
   - `<Button variant="contained">` -> `<button className="bg-primary text-primary-foreground px-4 py-2 rounded-md">`

7. **AppBar/Toolbar** -> header with fixed positioning
   - `<AppBar position="fixed">` -> `<header className="fixed top-0 left-0 right-0 z-50 bg-card border-b">`
   - `<Toolbar variant="dense">` -> `<div className="flex items-center h-12 px-4">`

8. **Dialog/Modal** -> temporary div (will be shadcn Sheet in Phase 33)
   - For now, use basic div with fixed positioning
   - `<Dialog open={open}>` -> `{open && <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50">...}</div>}`

9. **Menu/MenuItem** -> temporary dropdown
   - Use basic state + absolute positioning for now
   - Will be replaced with shadcn DropdownMenu in Phase 32

10. **Collapse** -> CSS transitions or details/summary
    - `<Collapse in={expanded}>` -> conditional render with Tailwind transitions

11. **Chip** -> span with badge styling
    - `<Chip label="passed">` -> `<span className="px-2 py-1 rounded-full text-xs bg-green-500/20 text-green-500">`

12. **LinearProgress** -> div with width animation
    - `<LinearProgress value={50} />` -> `<div className="h-1 bg-muted"><div className="h-full bg-primary" style={{width: '50%'}}></div></div>`

13. **Tooltip** -> title attribute for now (shadcn Tooltip in Phase 31)
    - `<Tooltip title="Help">` -> `<span title="Help">`

14. **CircularProgress** -> SVG or CSS spinner
    - Create simple CSS spinner with Tailwind animate-spin

**MUI sx prop conversion:**
- `sx={{ mb: 2 }}` -> `className="mb-4"` (remember: MUI 2 = 16px = Tailwind 4)
- `sx={{ color: 'primary.main' }}` -> `className="text-primary"`
- `sx={{ bgcolor: 'background.paper' }}` -> `className="bg-card"`
- `sx={{ '&:hover': { bgcolor: 'action.hover' } }}` -> `className="hover:bg-accent"`

**Remove from each file:**
1. All @mui/material imports
2. All @emotion/react and @emotion/styled imports
3. All sx props (convert to className)
4. Any useTheme() from MUI (use Tailwind useTheme if needed)

**Keep observer() wrappers** - MobX integration unchanged.

Files to process (in order):
1. src/App.tsx - Remove ThemeRegistry, use new ThemeProvider
2. src/theme/ThemeRegistry.tsx - DELETE this file
3. src/layout/MainLayout/index.tsx
4. All Dashboard components
5. All TestList components
6. All TestDetails components
7. All view components (FailureClusters, Gallery, Comparison)
8. All utility components (SearchModal, ExportButton, etc.)
  </action>
  <verify>
After each major component group:
- `npm run dev` should not crash
- Visual check that component renders (may look different, that's OK)
- No MUI imports in edited files: `grep -r "@mui" src/`
  </verify>
  <done>
All 50+ component files converted from MUI to Tailwind CSS equivalents.
  </done>
</task>

<task type="auto">
  <name>Task 2: Delete theme directory and remove MUI dependencies</name>
  <files>package.json, src/theme/ThemeRegistry.tsx</files>
  <action>
1. Delete the MUI theme directory:
```bash
rm -rf src/theme
```

2. Remove MUI and Emotion dependencies:
```bash
npm uninstall @mui/material @mui/icons-material @mui/lab @emotion/react @emotion/styled
```

3. Update src/index.css - remove MUI-specific styles:
```css
@import "tailwindcss";

@layer base {
  :root {
    /* Dark theme variables (from 30-03) */
    --background: 224 71% 4%;
    /* ... rest of variables ... */
  }

  .light {
    /* Light theme variables (from 30-03) */
    --background: 0 0% 100%;
    /* ... rest of variables ... */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

html,
body,
#root {
  margin: 0;
  padding: 0;
  min-height: 100vh;
}

html {
  overflow-y: auto;
  scrollbar-gutter: stable;
}
```

4. Verify package.json has no MUI/Emotion entries:
- @mui/material - REMOVED
- @mui/icons-material - REMOVED
- @mui/lab - REMOVED
- @emotion/react - REMOVED
- @emotion/styled - REMOVED
  </action>
  <verify>
1. `npm ls @mui/material` should fail (not found)
2. `npm ls @emotion/react` should fail (not found)
3. `ls src/theme` should fail (directory not found)
4. `npm run build` succeeds
  </verify>
  <done>
MUI and Emotion completely removed from dependencies and source.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete removal of MUI with Tailwind CSS replacements for all components</what-built>
  <how-to-verify>
1. Run `npm run dev`
2. Load a test report (use existing test data)
3. Verify these critical flows:
   - Dashboard renders with cards and charts
   - Test list shows tests with status badges
   - Clicking test opens details modal
   - Theme toggle works (dark <-> light)
   - Search modal opens with Cmd+K
   - Export button works
4. Note any visual regressions (acceptable if functionality works)
5. Run `npm run build` and verify production build
  </how-to-verify>
  <resume-signal>Type "approved" if app works, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `grep -r "@mui" src/` returns no results
2. `grep -r "@emotion" src/` returns no results
3. `npm run build` succeeds
4. Application loads and all views render
5. Theme toggle changes colors
6. Test details modal opens/closes
</verification>

<success_criteria>
- Zero MUI imports in codebase
- Zero Emotion imports in codebase
- package.json clean of @mui/* and @emotion/*
- Application functional with Tailwind-only styling
- Bundle size reduced (verify with build output)
- All views render without errors
</success_criteria>

<output>
After completion, create `.planning/phases/30-foundation-setup/30-04-SUMMARY.md`
</output>
