---
phase: 30-foundation-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - vite.config.ts
  - src/index.css
autonomous: true

must_haves:
  truths:
    - "Tailwind CSS v4 compiles without errors via Vite plugin"
    - "Utility classes like bg-blue-500 apply correctly in components"
    - "npm run build completes successfully with Tailwind"
  artifacts:
    - path: "package.json"
      provides: "tailwindcss and @tailwindcss/vite dependencies"
      contains: "tailwindcss"
    - path: "vite.config.ts"
      provides: "Tailwind Vite plugin configuration"
      contains: "tailwindcss()"
    - path: "src/index.css"
      provides: "Tailwind CSS import"
      contains: "@import"
  key_links:
    - from: "vite.config.ts"
      to: "@tailwindcss/vite"
      via: "plugin import and usage"
      pattern: "import tailwindcss"
    - from: "src/index.css"
      to: "tailwindcss"
      via: "CSS import directive"
      pattern: "@import.*tailwindcss"
---

<objective>
Install Tailwind CSS v4 and configure Vite plugin for 182x faster incremental rebuilds.

Purpose: Foundation for shadcn/ui migration - Tailwind CSS must be working before any component changes.
Output: Working Tailwind CSS compilation with MUI coexistence (temporary).
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/STACK-SHADCN-MIGRATION.md
@.planning/research/PITFALLS-SHADCN-MIGRATION.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Tailwind CSS v4 and utility dependencies</name>
  <files>package.json</files>
  <action>
Install Tailwind CSS v4 with Vite plugin and shadcn/ui utility dependencies:

```bash
npm install tailwindcss @tailwindcss/vite
npm install tailwind-merge clsx class-variance-authority tailwindcss-animate
npm install -D @types/node
```

These packages:
- tailwindcss@^4.1.18: CSS framework with v4 architecture
- @tailwindcss/vite@^4.1.18: Vite-specific plugin for microsecond rebuilds
- tailwind-merge@^3.4.0: Intelligent Tailwind class merging for shadcn cn() helper
- clsx@^2.1.1: Conditional className construction
- class-variance-authority@^0.7.1: Type-safe component variants (CVA)
- tailwindcss-animate@^1.0.7: Animation utilities for shadcn components
- @types/node: Required for path resolution in vite.config.ts

Do NOT remove MUI dependencies yet - they will be removed in plan 30-04 after all components migrate.
  </action>
  <verify>
Run `npm ls tailwindcss @tailwindcss/vite tailwind-merge clsx class-variance-authority` - all packages should be listed without errors.
  </verify>
  <done>
All Tailwind CSS v4 and utility dependencies installed in package.json.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Vite plugin and update CSS</name>
  <files>vite.config.ts, src/index.css</files>
  <action>
1. Update vite.config.ts to add Tailwind plugin and path alias:

```typescript
import { defineConfig } from "vite"
import react from "@vitejs/plugin-react"
import legacy from "@vitejs/plugin-legacy"
import tailwindcss from "@tailwindcss/vite"
import path from "path"

export default defineConfig({
  plugins: [
    react(),
    tailwindcss(),
    legacy({
      targets: ["defaults"],
      renderLegacyChunks: true,
    }),
  ],
  base: './',
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
    },
  },
})
```

IMPORTANT: tailwindcss() must be called AFTER react() in plugins array.

2. Update src/index.css to import Tailwind while preserving MUI compatibility:

```css
@import "tailwindcss";

/* Temporary: MUI coexistence styles */
/* MUI CssBaseline handles most resets, Tailwind Preflight will take over after MUI removal */

html,
body,
#root {
  margin: 0;
  padding: 0;
  min-height: 100vh;
}

/* Preserve scrollbar stability during transition */
html {
  background-color: var(--mui-palette-background-default, hsl(var(--background)));
  overflow-y: auto;
  scrollbar-gutter: stable;
}
```

The @import "tailwindcss" directive is Tailwind v4's new CSS-first configuration approach.
The fallback to CSS variable --background prepares for post-MUI era.
  </action>
  <verify>
1. Run `npm run dev` - dev server should start without errors
2. Run `npm run build` - build should complete successfully
3. Check browser DevTools - Tailwind classes should be recognized (inspect any element, add class="bg-red-500" via DevTools, should show red background)
  </verify>
  <done>
Vite configured with Tailwind CSS plugin and path alias. CSS imports Tailwind with MUI fallback for background.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create cn() utility helper</name>
  <files>src/lib/utils.ts</files>
  <action>
Create the cn() helper function required by all shadcn/ui components:

```typescript
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
```

This utility:
- Takes any number of class values (strings, objects, arrays, conditionals)
- clsx() processes conditional logic (objects like { 'class': condition })
- twMerge() intelligently merges Tailwind classes (later classes override earlier conflicting ones)

Example usage:
```typescript
cn("px-4 py-2", isActive && "bg-blue-500", { "opacity-50": disabled })
// Returns merged, deduplicated class string
```

Create directory if needed: src/lib/
  </action>
  <verify>
1. File exists at src/lib/utils.ts
2. TypeScript compiles without errors: `npx tsc --noEmit`
  </verify>
  <done>
cn() utility function created at src/lib/utils.ts, ready for shadcn/ui components.
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` starts without CSS-related errors
2. `npm run build` completes successfully
3. In browser DevTools, adding Tailwind class to any element works (e.g., bg-red-500 shows red)
4. TypeScript compilation passes with path alias (@/lib/utils should resolve)
</verification>

<success_criteria>
- Tailwind CSS v4 installed and compiling via Vite plugin
- Path alias @/* configured for shadcn/ui component imports
- cn() utility helper created for class merging
- MUI still works (coexistence maintained for incremental migration)
- Build and dev commands succeed without errors
</success_criteria>

<output>
After completion, create `.planning/phases/30-foundation-setup/30-01-SUMMARY.md`
</output>
