---
phase: 30-foundation-setup
plan: 05
type: execute
wave: 3
depends_on: ["30-02"]
files_modified:
  - package.json
  - src/App.tsx
  - src/components/TestDetailsModal/index.tsx
  - src/components/Comparison/DiffList.tsx
  - src/components/Comparison/ComparisonSummary.tsx
  - src/components/Comparison/RunSelector.tsx
  - src/components/Gallery/GalleryItem.tsx
  - src/components/FailureClusters/ClusterGroup.tsx
  - src/components/Dashboard/QuickInsightsCard.tsx
  - src/components/Dashboard/AttentionRequiredCard.tsx
  - src/components/Dashboard/SuiteHealthCard.tsx
  - src/components/ExportButton/index.tsx
  - src/components/TestList/VirtualizedTestList.tsx
  - src/components/TestList/SuiteGroup.tsx
  - src/components/TestDetails/TestStep.tsx
  - src/components/ThemeToggle/index.tsx
  - src/components/Dashboard/AlertsPanel.tsx
  - src/components/TestList/StabilityBadge.tsx
  - src/components/Dashboard/HistoryTimeline.tsx
  - src/components/TestDetails/TestStepAttachment.tsx
  - src/components/AttachmentViewer/DownloadButton.tsx
  - src/components/TestList/statusIcon.tsx
  - src/components/TestList/TestListSearch.tsx
autonomous: true

must_haves:
  truths:
    - "No @mui/icons-material imports exist in any source file"
    - "lucide-react icons render in all components"
    - "Icon sizes match original MUI icon sizes"
  artifacts:
    - path: "package.json"
      provides: "lucide-react dependency"
      contains: "lucide-react"
    - path: "src/components/TestList/statusIcon.tsx"
      provides: "Status icons with lucide-react"
      contains: "lucide-react"
  key_links:
    - from: "src/components/ThemeToggle/index.tsx"
      to: "lucide-react"
      via: "Sun and Moon icon imports"
      pattern: "import.*Sun.*Moon.*from.*lucide-react"
---

<objective>
Replace all @mui/icons-material imports with lucide-react equivalents.

Purpose: Complete icon migration required for MUI removal. lucide-react is shadcn/ui's default icon library.
Output: All components using lucide-react icons with consistent sizing.
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/STACK-SHADCN-MIGRATION.md
@.planning/phases/30-foundation-setup/30-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install lucide-react</name>
  <files>package.json</files>
  <action>
Install lucide-react icon library:

```bash
npm install lucide-react
```

lucide-react features:
- 1,655+ icons (more than MUI icons)
- Tree-shakeable (only imported icons in bundle)
- TypeScript native
- Consistent 24x24 default size
- Stroke-based icons (works well with Tailwind colors)
  </action>
  <verify>
`npm ls lucide-react` shows installed version
  </verify>
  <done>
lucide-react installed as dependency.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create icon mapping reference and replace all icons</name>
  <files>All 22 files with @mui/icons-material imports</files>
  <action>
Replace MUI icons with lucide-react equivalents in all files.

**Icon mapping (MUI -> lucide-react):**

| MUI Icon | lucide-react | Usage |
|----------|--------------|-------|
| Search | Search | Search modal, test list search |
| Menu | Menu | Hamburger navigation |
| Dashboard | LayoutDashboard | Navigation |
| FormatListBulleted | List | Tests navigation |
| ErrorOutline | AlertCircle | Failure clusters |
| Collections | GalleryHorizontal or Image | Gallery |
| CompareArrows | ArrowLeftRight | Comparison |
| BubbleChart | BarChart3 or Activity | Analytics |
| CheckCircle | CheckCircle2 | Passed status |
| Cancel / Error | XCircle | Failed status |
| Warning | AlertTriangle | Skipped status |
| Help / HelpOutline | HelpCircle | Broken status |
| ExpandMore | ChevronDown | Collapse/expand |
| ExpandLess | ChevronUp | Collapse/expand |
| ChevronRight | ChevronRight | Tree navigation |
| Close | X | Close buttons |
| Download | Download | Download button |
| FileDownload | Download | Export button |
| LightMode / Brightness7 | Sun | Light theme |
| DarkMode / Brightness4 | Moon | Dark theme |
| Info | Info | Info panels |
| AccessTime / Schedule | Clock | Duration, timing |
| CalendarToday | Calendar | Date display |
| Speed | Timer or Gauge | Performance |
| TrendingUp | TrendingUp | Trends |
| TrendingDown | TrendingDown | Trends |
| ArrowUpward | ArrowUp | Sorting |
| ArrowDownward | ArrowDown | Sorting |
| PlayArrow | Play | Step actions |
| Attachment | Paperclip | Attachments |
| Image | Image | Image attachments |
| Code | Code | Code blocks |
| ContentCopy | Copy | Copy button |
| OpenInNew | ExternalLink | External links |

**Conversion pattern:**

Before (MUI):
```typescript
import { Search as SearchIcon, Menu as MenuIcon } from '@mui/icons-material'

<IconButton>
  <SearchIcon />
</IconButton>
```

After (lucide-react):
```typescript
import { Search, Menu } from 'lucide-react'

<button className="p-2 rounded-md hover:bg-accent">
  <Search className="h-5 w-5" />
</button>
```

**Size mapping:**
- MUI default icon size: 24px
- lucide-react default: 24px (but use className for explicit control)
- Use `className="h-5 w-5"` for 20px icons (most UI icons)
- Use `className="h-4 w-4"` for 16px icons (small/inline)
- Use `className="h-6 w-6"` for 24px icons (larger/prominent)

**Color handling:**
- MUI: `color="primary"` or sx={{ color: 'text.secondary' }}
- lucide-react: Uses currentColor by default
- Apply color via Tailwind: `className="h-5 w-5 text-primary"` or `text-muted-foreground`

**Files to update (22 files):**

1. src/App.tsx - Search, Menu, Dashboard, List, AlertCircle, GalleryHorizontal, ArrowLeftRight, BarChart3
2. src/components/TestDetailsModal/index.tsx - X (close)
3. src/components/Comparison/DiffList.tsx - ArrowUp, ArrowDown, TrendingUp, TrendingDown
4. src/components/Comparison/ComparisonSummary.tsx - CheckCircle2, XCircle, Plus, Minus
5. src/components/Comparison/RunSelector.tsx - ChevronDown, Calendar
6. src/components/Gallery/GalleryItem.tsx - Image, Code, Paperclip
7. src/components/FailureClusters/ClusterGroup.tsx - ChevronDown, ChevronRight, AlertCircle
8. src/components/Dashboard/QuickInsightsCard.tsx - TrendingUp, TrendingDown, Timer
9. src/components/Dashboard/AttentionRequiredCard.tsx - AlertCircle, XCircle
10. src/components/Dashboard/SuiteHealthCard.tsx - ChevronDown, ChevronRight
11. src/components/ExportButton/index.tsx - Download
12. src/components/TestList/VirtualizedTestList.tsx - ChevronDown, ChevronRight
13. src/components/TestList/SuiteGroup.tsx - ChevronDown, ChevronRight
14. src/components/TestDetails/TestStep.tsx - Play, CheckCircle2, XCircle, ChevronDown
15. src/components/ThemeToggle/index.tsx - Sun, Moon
16. src/components/Dashboard/AlertsPanel.tsx - AlertTriangle, AlertCircle, Info
17. src/components/TestList/StabilityBadge.tsx - TrendingUp, TrendingDown, Activity
18. src/components/Dashboard/HistoryTimeline.tsx - Calendar, Clock
19. src/components/TestDetails/TestStepAttachment.tsx - Image, Code, Paperclip, Download
20. src/components/AttachmentViewer/DownloadButton.tsx - Download
21. src/components/TestList/statusIcon.tsx - CheckCircle2, XCircle, AlertTriangle, HelpCircle
22. src/components/TestList/TestListSearch.tsx - Search, X
  </action>
  <verify>
After each file:
1. No @mui/icons-material import remains
2. Icons render correctly (visual check)
3. `npm run dev` doesn't crash

After all files:
`grep -r "@mui/icons-material" src/` returns no results
  </verify>
  <done>
All 22 files migrated from MUI icons to lucide-react.
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify icon rendering and remove MUI icons package</name>
  <files>package.json</files>
  <action>
1. Run final verification that no MUI icon imports remain:
```bash
grep -r "@mui/icons-material" src/
```
Should return empty (no matches).

2. If plan 30-04 hasn't run yet, do NOT uninstall @mui/icons-material
   (it will be uninstalled with all MUI packages in 30-04)

3. If plan 30-04 HAS run, verify @mui/icons-material is already removed:
```bash
npm ls @mui/icons-material
```
Should fail (not found).

4. Run dev server and verify icons render:
```bash
npm run dev
```

5. Check critical icon locations:
- App header: Menu icon, Search icon
- Theme toggle: Sun/Moon icons
- Test list: Status icons (CheckCircle2, XCircle, AlertTriangle, HelpCircle)
- Expandable sections: ChevronDown/ChevronRight
- Export button: Download icon
  </action>
  <verify>
1. `grep -r "@mui/icons-material" src/` returns no results
2. All icons visible in UI
3. Icons have correct sizes (not too big or small)
4. Icons change color with theme (using currentColor)
  </verify>
  <done>
Icon migration complete, all components using lucide-react.
  </done>
</task>

</tasks>

<verification>
1. `grep -r "@mui/icons-material" src/` returns empty
2. `npm ls lucide-react` shows installed
3. All views render with visible icons
4. Theme toggle shows correct Sun/Moon icons
5. Status icons display for all test statuses
6. Expandable components show chevron icons
</verification>

<success_criteria>
- Zero @mui/icons-material imports in codebase
- lucide-react installed and used in all icon locations
- Icons render at appropriate sizes (h-4 w-4 to h-6 w-6)
- Icons respond to theme (light/dark colors via Tailwind)
- No visual regressions in icon display
</success_criteria>

<output>
After completion, create `.planning/phases/30-foundation-setup/30-05-SUMMARY.md`
</output>
